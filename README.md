<h1>
fastpm <a href="https://npmjs.org/package/fastpm"><img src="https://img.shields.io/badge/npm-v1.0.0-F00.svg?colorA=000"/></a> <a href="src"><img src="https://img.shields.io/badge/loc-429-FFF.svg?colorA=000"/></a> <a href="https://cdn.jsdelivr.net/npm/fastpm@1.0.0/dist/fastpm.min.js"><img src="https://img.shields.io/badge/brotli-5K-333.svg?colorA=000"/></a> <a href="LICENSE"><img src="https://img.shields.io/badge/license-MIT-F0B.svg?colorA=000"/></a>
</h1>

<p></p>

Fast package manager for Node.js.

<h4>
<table><tr><td title="Triple click to select and copy paste">
<code>npm i fastpm -g</code>
</td><td title="Triple click to select and copy paste">
<code>pnpm add fastpm -g</code>
</td><td title="Triple click to select and copy paste">
<code>yarn global add fastpm</code>
</td></tr></table>
</h4>

## What it does

**`fastpm`** will install the dependencies of your project, using `npm`,
but in a central location and then symlink them inside `node_modules`.

This allows for faster installation times and saves disk space.

## How

For every dependency, it creates a project that requires it and then uses the `--global-style` parameter to make that dependency contain all of its dependencies in a flat structure. This way it can be symlinked to a location and it will work with
minimal issues. It also tries to install `peerDependencies` transitively
in order to work with certain tooling such as `eslint` and `jest`. It also runs
`postinstall` scripts on the dependencies as it would have been the case if they were installed normally within our project. Finally, it runs `npm install` inside the
target project's directory, which lets it perform the necessary local links and do its own final magic that somewhat fixes the state of `node_modules` if it wasn't 100% achieved during the symlinks.

This is obviously very experimental and not the recommended way of doing things, but it works for my use-case and I did manage to get rid **>30gb** of unnecessary duplication using this technique and so I hope it's useful to someone.

Currently it only has one command, `install`, but maybe in the future I'll add more commands that fit my workflow, who knows.

## API

<p>  <details id="<internal>$27" title="Namespace" ><summary><span><a href="#<internal>$27">#</a></span>  <code><strong><internal></strong></code>    </summary>    <ul>        <p>  <details id="CoreOptions$28" title="Class" ><summary><span><a href="#CoreOptions$28">#</a></span>  <code><strong>CoreOptions</strong></code>    </summary>  <a href="src/core.ts#L4">src/core.ts#L4</a>  <ul>        <p>  <details id="constructor$29" title="Constructor" ><summary><span><a href="#constructor$29">#</a></span>  <code><strong>constructor</strong></code><em>(options)</em>    </summary>  <a href="src/core.ts#L11">src/core.ts#L11</a>  <ul>    <p>  <details id="new CoreOptions$30" title="ConstructorSignature" ><summary><span><a href="#new CoreOptions$30">#</a></span>  <code><strong>new CoreOptions</strong></code><em>()</em>    </summary>    <ul><p><a href="#CoreOptions$28">CoreOptions</a></p>      <p>  <details id="options$31" title="Parameter" ><summary><span><a href="#options$31">#</a></span>  <code><strong>options</strong></code>  <span><span>&nbsp;=&nbsp;</span>  <code>{}</code></span>  </summary>    <ul><p><span>Partial</span>&lt;<a href="#CoreOptions$28">CoreOptions</a>&gt;</p>        </ul></details></p>  </ul></details></p>    </ul></details><details id="bin$32" title="Property" ><summary><span><a href="#bin$32">#</a></span>  <code><strong>bin</strong></code>  <span><span>&nbsp;=&nbsp;</span>  <code>'safe-npm'</code></span>  </summary>  <a href="src/core.ts#L6">src/core.ts#L6</a>  <ul><p>string</p>        </ul></details><details id="root$33" title="Property" ><summary><span><a href="#root$33">#</a></span>  <code><strong>root</strong></code>  <span><span>&nbsp;=&nbsp;</span>  <code>'.'</code></span>  </summary>  <a href="src/core.ts#L9">src/core.ts#L9</a>  <ul><p>string</p>        </ul></details></p></ul></details></p></ul></details><details id="InstallOptions$1" title="Class" ><summary><span><a href="#InstallOptions$1">#</a></span>  <code><strong>InstallOptions</strong></code>    </summary>  <a href="src/install.ts#L31">src/install.ts#L31</a>  <ul>        <p>  <details id="constructor$2" title="Constructor" ><summary><span><a href="#constructor$2">#</a></span>  <code><strong>constructor</strong></code><em>(options)</em>    </summary>  <a href="src/install.ts#L49">src/install.ts#L49</a>  <ul>    <p>  <details id="new InstallOptions$3" title="ConstructorSignature" ><summary><span><a href="#new InstallOptions$3">#</a></span>  <code><strong>new InstallOptions</strong></code><em>()</em>    </summary>    <ul><p><a href="#InstallOptions$1">InstallOptions</a></p>      <p>  <details id="options$4" title="Parameter" ><summary><span><a href="#options$4">#</a></span>  <code><strong>options</strong></code>  <span><span>&nbsp;=&nbsp;</span>  <code>{}</code></span>  </summary>    <ul><p><span>Partial</span>&lt;<a href="#InstallOptions$1">InstallOptions</a>&gt;</p>        </ul></details></p>  </ul></details></p>    </ul></details><details id="bin$11" title="Property" ><summary><span><a href="#bin$11">#</a></span>  <code><strong>bin</strong></code>  <span><span>&nbsp;=&nbsp;</span>  <code>'safe-npm'</code></span>  </summary>  <a href="src/core.ts#L6">src/core.ts#L6</a>  <ul><p>string</p>        </ul></details><details id="cache$9" title="Property" ><summary><span><a href="#cache$9">#</a></span>  <code><strong>cache</strong></code>  <span><span>&nbsp;=&nbsp;</span>  <code>...</code></span>  </summary>  <a href="src/install.ts#L45">src/install.ts#L45</a>  <ul><p>string</p>        </ul></details><details id="deps$10" title="Property" ><summary><span><a href="#deps$10">#</a></span>  <code><strong>deps</strong></code>    </summary>  <a href="src/install.ts#L47">src/install.ts#L47</a>  <ul><p>string</p>        </ul></details><details id="fast$8" title="Property" ><summary><span><a href="#fast$8">#</a></span>  <code><strong>fast</strong></code>  <span><span>&nbsp;=&nbsp;</span>  <code>false</code></span>  </summary>  <a href="src/install.ts#L42">src/install.ts#L42</a>  <ul><p>boolean</p>        </ul></details><details id="force$6" title="Property" ><summary><span><a href="#force$6">#</a></span>  <code><strong>force</strong></code>  <span><span>&nbsp;=&nbsp;</span>  <code>false</code></span>  </summary>  <a href="src/install.ts#L36">src/install.ts#L36</a>  <ul><p>boolean</p>        </ul></details><details id="peer$5" title="Property" ><summary><span><a href="#peer$5">#</a></span>  <code><strong>peer</strong></code>  <span><span>&nbsp;=&nbsp;</span>  <code>false</code></span>  </summary>  <a href="src/install.ts#L33">src/install.ts#L33</a>  <ul><p>boolean</p>        </ul></details><details id="root$12" title="Property" ><summary><span><a href="#root$12">#</a></span>  <code><strong>root</strong></code>  <span><span>&nbsp;=&nbsp;</span>  <code>'.'</code></span>  </summary>  <a href="src/core.ts#L9">src/core.ts#L9</a>  <ul><p>string</p>        </ul></details><details id="skipFinalize$7" title="Property" ><summary><span><a href="#skipFinalize$7">#</a></span>  <code><strong>skipFinalize</strong></code>  <span><span>&nbsp;=&nbsp;</span>  <code>false</code></span>  </summary>  <a href="src/install.ts#L39">src/install.ts#L39</a>  <ul><p>boolean</p>        </ul></details></p></ul></details><details id="LinkOptions$16" title="Class" ><summary><span><a href="#LinkOptions$16">#</a></span>  <code><strong>LinkOptions</strong></code>    </summary>  <a href="src/link.ts#L15">src/link.ts#L15</a>  <ul>        <p>  <details id="constructor$17" title="Constructor" ><summary><span><a href="#constructor$17">#</a></span>  <code><strong>constructor</strong></code><em>(options)</em>    </summary>  <a href="src/link.ts#L22">src/link.ts#L22</a>  <ul>    <p>  <details id="new LinkOptions$18" title="ConstructorSignature" ><summary><span><a href="#new LinkOptions$18">#</a></span>  <code><strong>new LinkOptions</strong></code><em>()</em>    </summary>    <ul><p><a href="#LinkOptions$16">LinkOptions</a></p>      <p>  <details id="options$19" title="Parameter" ><summary><span><a href="#options$19">#</a></span>  <code><strong>options</strong></code>  <span><span>&nbsp;=&nbsp;</span>  <code>{}</code></span>  </summary>    <ul><p><span>Partial</span>&lt;<a href="#LinkOptions$16">LinkOptions</a>&gt;</p>        </ul></details></p>  </ul></details></p>    </ul></details><details id="bin$22" title="Property" ><summary><span><a href="#bin$22">#</a></span>  <code><strong>bin</strong></code>  <span><span>&nbsp;=&nbsp;</span>  <code>'safe-npm'</code></span>  </summary>  <a href="src/core.ts#L6">src/core.ts#L6</a>  <ul><p>string</p>        </ul></details><details id="dev$21" title="Property" ><summary><span><a href="#dev$21">#</a></span>  <code><strong>dev</strong></code>  <span><span>&nbsp;=&nbsp;</span>  <code>false</code></span>  </summary>  <a href="src/link.ts#L20">src/link.ts#L20</a>  <ul><p>boolean</p>        </ul></details><details id="root$23" title="Property" ><summary><span><a href="#root$23">#</a></span>  <code><strong>root</strong></code>  <span><span>&nbsp;=&nbsp;</span>  <code>'.'</code></span>  </summary>  <a href="src/core.ts#L9">src/core.ts#L9</a>  <ul><p>string</p>        </ul></details><details id="source$20" title="Property" ><summary><span><a href="#source$20">#</a></span>  <code><strong>source</strong></code>    </summary>  <a href="src/link.ts#L17">src/link.ts#L17</a>  <ul><p>string</p>        </ul></details></p></ul></details><details id="install$13" title="Function" ><summary><span><a href="#install$13">#</a></span>  <code><strong>install</strong></code><em>(options)</em>    </summary>  <a href="src/install.ts#L55">src/install.ts#L55</a>  <ul>    <p>    <details id="options$15" title="Parameter" ><summary><span><a href="#options$15">#</a></span>  <code><strong>options</strong></code>    </summary>    <ul><p><a href="#InstallOptions$1">InstallOptions</a></p>        </ul></details>  <p><strong>install</strong><em>(options)</em>  &nbsp;=&gt;  <ul><span>Promise</span>&lt;void&gt;</ul></p></p>    </ul></details><details id="link$24" title="Function" ><summary><span><a href="#link$24">#</a></span>  <code><strong>link</strong></code><em>(options)</em>    </summary>  <a href="src/link.ts#L28">src/link.ts#L28</a>  <ul>    <p>    <details id="options$26" title="Parameter" ><summary><span><a href="#options$26">#</a></span>  <code><strong>options</strong></code>    </summary>    <ul><p><a href="#LinkOptions$16">LinkOptions</a></p>        </ul></details>  <p><strong>link</strong><em>(options)</em>  &nbsp;=&gt;  <ul><span>Promise</span>&lt;void&gt;</ul></p></p>    </ul></details></p>

## Credits

- [decarg](https://npmjs.org/package/decarg) by [stagas](https://github.com/stagas) &ndash; decorator based cli arguments parser
- [semver](https://npmjs.org/package/semver) by [GitHub Inc.](https://github.com/npm) &ndash; The semantic version parser used by npm.

## Contributing

[Fork](https://github.com/stagas/fastpm/fork) or [edit](https://github.dev/stagas/fastpm) and submit a PR.

All contributions are welcome!

## License

<a href="LICENSE">MIT</a> &copy; 2022 [stagas](https://github.com/stagas)
